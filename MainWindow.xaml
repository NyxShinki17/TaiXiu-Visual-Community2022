<Window x:Class="Taixiu.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="GAME TÀI XỈU 2 CỬA" Height="700" Width="1000"
        WindowStartupLocation="CenterScreen" Background="Black">

    <Window.Resources>
        <Style x:Key="ChipStyle" TargetType="Button">
            <Setter Property="Width" Value="70"/>
            <Setter Property="Height" Value="70"/>
            <Setter Property="Margin" Value="5"/>
            <Setter Property="Background" Value="#333"/>
            <Setter Property="Foreground" Value="White"/>
            <Setter Property="FontWeight" Value="Bold"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="Button">
                        <Grid>
                            <Ellipse Fill="{TemplateBinding Background}" Stroke="Gold" StrokeThickness="2"/>
                            <TextBlock Text="{TemplateBinding Content}" HorizontalAlignment="Center" VerticalAlignment="Center"/>
                        </Grid>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>
    </Window.Resources>

    <Grid>
        <!-- Grid.RowDefinitions must appear HERE, before any child elements! -->
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>

        <!-- Left hidden panel for Discord logged-in users -->
        <Border x:Name="LeftPanel" Background="#111" Width="220" HorizontalAlignment="Left" VerticalAlignment="Stretch" Visibility="Collapsed" Margin="10">
            <StackPanel>
                <TextBlock Text="Đã đăng nhập (Discord)" Foreground="White" FontWeight="Bold" Margin="10"/>
                <ListBox x:Name="lstDiscordUsers" Background="#111" Foreground="White" BorderThickness="0" />
            </StackPanel>
        </Border>

        <!-- Top bar: toggle left panel, balance, Discord login -->
        <Border Grid.Row="0" Background="#222" Padding="8">
            <DockPanel>
                <StackPanel Orientation="Horizontal" DockPanel.Dock="Left">
                    <Button x:Name="btnToggleLeft" Content="☰" Width="36" Height="36" Margin="0,0,8,0" Click="BtnToggleLeft_Click"/>
                    <StackPanel Orientation="Horizontal" VerticalAlignment="Center">
                        <Button x:Name="btnGameTaiXiu" Content="TÀI XỈU" Margin="0,0,6,0" Click="BtnGameTaiXiu_Click"/>
                        <Button x:Name="btnGameBauCua" Content="BẦU CUA" Margin="0,0,6,0" Click="BtnGameBauCua_Click"/>
                        <Button x:Name="btnGameTienLen" Content="TIẾN LÊN" Click="BtnGameTienLen_Click"/>
                    </StackPanel>
                </StackPanel>

                <StackPanel Orientation="Horizontal" DockPanel.Dock="Right" HorizontalAlignment="Right">
                    <TextBlock Text="Số dư: " Foreground="#AAA" FontSize="16" VerticalAlignment="Center" Margin="0,0,6,0"/>
                    <TextBlock x:Name="txtTotalMoney" Text="10,000,000" Foreground="Gold" FontSize="20" FontWeight="Bold" VerticalAlignment="Center"/>
                    <Button Content="NẠP" Width="60" Margin="20,0,0,0" Background="Green" Foreground="White" Click="BtnDonate_Click"/>
                    <Button x:Name="btnDiscordLogin" Content="Login with Discord" Width="140" Margin="12,0,0,0" Click="BtnDiscordLogin_Click"/>
                </StackPanel>
            </DockPanel>
        </Border>

        <!-- Game host area: contains three game grids, only one visible at a time -->
        <Grid Grid.Row="1" x:Name="GameHost" Margin="0">
            <!-- Tài Xỉu Grid (existing content moved here) -->
            <Grid x:Name="TaiXiuGrid">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="300"/>
                    <ColumnDefinition Width="*"/>
                </Grid.ColumnDefinitions>

                <Button Grid.Column="0" Click="BtnBetXiu_Click" Margin="20" Background="Transparent" BorderThickness="0">
                    <Border Background="#22FFFFFF" CornerRadius="10" BorderBrush="White" BorderThickness="2">
                        <StackPanel VerticalAlignment="Center">
                            <TextBlock Text="XỈU" FontSize="60" Foreground="White" FontWeight="Bold" HorizontalAlignment="Center"/>
                            <TextBlock Text="Cược:" Foreground="Gray" HorizontalAlignment="Center"/>
                            <TextBlock x:Name="txtBetXiu" Text="0" FontSize="30" Foreground="Cyan" FontWeight="Bold" HorizontalAlignment="Center"/>
                        </StackPanel>
                    </Border>
                </Button>

                <Button Grid.Column="2" Click="BtnBetTai_Click" Margin="20" Background="Transparent" BorderThickness="0">
                    <Border Background="#22FF0000" CornerRadius="10" BorderBrush="Red" BorderThickness="2">
                        <StackPanel VerticalAlignment="Center">
                            <TextBlock Text="TÀI" FontSize="60" Foreground="Red" FontWeight="Bold" HorizontalAlignment="Center"/>
                            <TextBlock Text="Cược:" Foreground="Gray" HorizontalAlignment="Center"/>
                            <TextBlock x:Name="txtBetTai" Text="0" FontSize="30" Foreground="Gold" FontWeight="Bold" HorizontalAlignment="Center"/>
                        </StackPanel>
                    </Border>
                </Button>

                <Grid Grid.Column="1">
                    <Ellipse Width="250" Height="250" Fill="#111" Stroke="Gold" StrokeThickness="3" HorizontalAlignment="Center" VerticalAlignment="Center"/>

                    <StackPanel Orientation="Horizontal" HorizontalAlignment="Center" VerticalAlignment="Center">
                        <TextBlock x:Name="dice1" Text="⚀" FontSize="70" Foreground="White" Margin="2"/>
                        <TextBlock x:Name="dice2" Text="⚁" FontSize="70" Foreground="White" Margin="2"/>
                        <TextBlock x:Name="dice3" Text="⚂" FontSize="70" Foreground="White" Margin="2"/>
                    </StackPanel>

                    <TextBlock x:Name="txtResultScore" Text="?" FontSize="40" Foreground="White" FontWeight="Bold" VerticalAlignment="Bottom" HorizontalAlignment="Center" Margin="0,0,0,100"/>

                    <Border x:Name="BowlCover" Width="240" Height="240" CornerRadius="120" Background="#333" Visibility="Visible" HorizontalAlignment="Center" VerticalAlignment="Center">
                        <TextBlock Text="TAY" FontSize="50" Foreground="#555" FontWeight="Bold" HorizontalAlignment="Center" VerticalAlignment="Center"/>
                    </Border>

                    <Button x:Name="btnXoc" Content="XỐC" Width="100" Height="40" Background="Orange" FontWeight="Bold" VerticalAlignment="Bottom" Margin="0,0,0,30" Click="BtnRoll_Click"/>
                </Grid>
            </Grid>

            <!-- Bầu Cua placeholder -->
            <Grid x:Name="BauCuaGrid" Visibility="Collapsed" Background="Transparent">
                <StackPanel HorizontalAlignment="Center" VerticalAlignment="Center" Width="420">
                    <TextBlock Text="BẦU CUA (placeholder)" FontSize="28" Foreground="White" HorizontalAlignment="Center" Margin="0,0,0,12"/>
                    <UniformGrid Columns="3" Rows="2" Margin="0,0,0,12">
                        <Border Background="#222" CornerRadius="8" Margin="6"><TextBlock Text="BẦU" Foreground="White" HorizontalAlignment="Center" VerticalAlignment="Center" FontSize="20" Margin="12"/></Border>
                        <Border Background="#222" CornerRadius="8" Margin="6"><TextBlock Text="CUA" Foreground="White" HorizontalAlignment="Center" VerticalAlignment="Center" FontSize="20" Margin="12"/></Border>
                        <Border Background="#222" CornerRadius="8" Margin="6"><TextBlock Text="TOM" Foreground="White" HorizontalAlignment="Center" VerticalAlignment="Center" FontSize="20" Margin="12"/></Border>
                        <Border Background="#222" CornerRadius="8" Margin="6"><TextBlock Text="CÁ" Foreground="White" HorizontalAlignment="Center" VerticalAlignment="Center" FontSize="20" Margin="12"/></Border>
                        <Border Background="#222" CornerRadius="8" Margin="6"><TextBlock Text="GÀ" Foreground="White" HorizontalAlignment="Center" VerticalAlignment="Center" FontSize="20" Margin="12"/></Border>
                        <Border Background="#222" CornerRadius="8" Margin="6"><TextBlock Text="BAO" Foreground="White" HorizontalAlignment="Center" VerticalAlignment="Center" FontSize="20" Margin="12"/></Border>
                    </UniformGrid>
                    <Button Content="Đặt cược (demo)" Width="160" HorizontalAlignment="Center" Click="BtnBauCuaBet_Click"/>
                </StackPanel>
            </Grid>

            <!-- Tiến Lên placeholder -->
            <Grid x:Name="TienLenGrid" Visibility="Collapsed" Background="Transparent">
                <StackPanel HorizontalAlignment="Center" VerticalAlignment="Center" Width="420">
                    <TextBlock Text="TIẾN LÊN (placeholder)" FontSize="28" Foreground="White" HorizontalAlignment="Center" Margin="0,0,0,12"/>
                    <TextBlock Text="This is a placeholder area for Tiến Lên. Implement game flow or navigate to a dedicated window." Foreground="#CCC" TextWrapping="Wrap" Margin="6"/>
                    <Button Content="Start Tiến Lên (demo)" Width="180" HorizontalAlignment="Center" Margin="10" Click="BtnTienLenStart_Click"/>
                </StackPanel>
            </Grid>
        </Grid>

        <Border Grid.Row="2" Background="#111" Padding="10">
            <StackPanel>
                <TextBlock x:Name="txtSelectedChip" Text="Đang chọn: 10K" Foreground="White" HorizontalAlignment="Center" Margin="5"/>
                <StackPanel Orientation="Horizontal" HorizontalAlignment="Center">
                    <Button Content="10K" Tag="10000" Style="{StaticResource ChipStyle}" Click="BtnSelectChip_Click"/>
                    <Button Content="50K" Tag="50000" Style="{StaticResource ChipStyle}" Click="BtnSelectChip_Click"/>
                    <Button Content="100K" Tag="100000" Style="{StaticResource ChipStyle}" Click="BtnSelectChip_Click"/>
                    <Button Content="500K" Tag="500000" Style="{StaticResource ChipStyle}" Click="BtnSelectChip_Click"/>
                    <Button Content="HỦY" Width="70" Height="70" Margin="5" Background="Red" Foreground="White" Click="BtnReset_Click"/>
                </StackPanel>
            </StackPanel>
        </Border>

        <!-- Discord login popup (simple simulated flow) -->
        <Grid x:Name="DiscordLoginPopup" Background="#AA000000" Visibility="Collapsed">
            <Border Width="360" Height="160" Background="#222" CornerRadius="8" HorizontalAlignment="Center" VerticalAlignment="Center">
                <StackPanel Margin="12">
                    <TextBlock Text="Discord Login (demo)" Foreground="White" FontSize="16" FontWeight="Bold" Margin="0,0,0,8"/>
                    <TextBlock Text="Enter Discord display name to simulate login:" Foreground="#CCC" Margin="0,0,0,6"/>
                    <TextBox x:Name="txtDiscordName" Height="28" Background="#111" Foreground="White"/>
                    <StackPanel Orientation="Horizontal" HorizontalAlignment="Right" Margin="0,8,0,0">
                        <Button Content="Cancel" Width="80" Margin="6,0,0,0" Click="BtnDiscordCancel_Click"/>
                        <Button Content="Login" Width="80" Margin="6,0,0,0" Click="BtnDiscordConfirm_Click"/>
                    </StackPanel>
                </StackPanel>
            </Border>
        </Grid>

        <!-- Simple donate QR popup -->
        <Grid x:Name="PopupQR" Visibility="Collapsed" Background="#AA000000">
            <Border Width="300" Height="300" Background="White" CornerRadius="10">
                <StackPanel VerticalAlignment="Center">
                    <TextBlock Text="DONATE" FontSize="20" FontWeight="Bold" HorizontalAlignment="Center" Margin="10"/>
                    <Image Source="/Images/myqr.png" Width="150" Height="150" Margin="10"/>
                    <Button Content="ĐÓNG" Width="100" Margin="10" Click="CloseQR_Click"/>
                </StackPanel>
            </Border>
        </Grid> 
    </Grid>
</Window>
